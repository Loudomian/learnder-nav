import{s as f}from"./service-CvN87575.js";import{_ as m,G as _,r as y,o as s,c as v,w as u,a as n,t as a,b as o,F as i,d as r,e as B}from"./index-DwBrLgem.js";const d=["B","KB","MB","GB"],h=t=>{let e=0;for(;t>1e3&&e<d.length;)t/=1e3,e++;return Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(t||0)+` ${d[e]}/s`},I={name:"QBittorrent",components:{Generic:_},mixins:[f],props:{item:Object},data:()=>({dl:null,ul:null,count:null,error:null}),computed:{downRate:function(){return h(this.dl)},upRate:function(){return h(this.ul)}},created(){const t=parseInt(this.item.rateInterval,10)||0,e=parseInt(this.item.torrentInterval,10)||0;t>0&&setInterval(()=>this.getRate(),t),e>0&&setInterval(()=>this.fetchCount(),e),this.getRate(),this.fetchCount()},methods:{fetchCount:async function(){try{const t=await this.fetch("/api/v2/torrents/info");this.error=!1,this.count=t.length}catch(t){this.error=!0,console.error(t)}},getRate:async function(){try{const t=await this.fetch("/api/v2/transfer/info");this.error=!1,this.dl=t.dl_info_speed,this.ul=t.up_info_speed}catch(t){this.error=!0,console.error(t)}}}},w={class:"title is-4"},g={class:"subtitle is-6"},k={key:0,class:"error"},R={class:"down monospace"},b={class:"up monospace"},C={key:0,class:"count"};function G(t,e,c,F,N,l){const p=y("Generic");return s(),v(p,{item:c.item},{content:u(()=>[n("p",w,a(c.item.name),1),n("p",g,[t.error?(s(),o("span",k,"An error has occurred.")):(s(),o(i,{key:1},[n("span",R,[e[0]||(e[0]=n("p",{class:"fas fa-download"},null,-1)),r(" "+a(l.downRate),1)]),n("span",b,[e[1]||(e[1]=n("p",{class:"fas fa-upload"},null,-1)),r(" "+a(l.upRate),1)])],64))])]),indicator:u(()=>[t.error?B("",!0):(s(),o("span",C,[r(a(t.count)+" ",1),t.count===1?(s(),o(i,{key:0},[r("torrent")],64)):(s(),o(i,{key:1},[r("torrents")],64))]))]),_:1},8,["item"])}const D=m(I,[["render",G],["__scopeId","data-v-5b8f55a7"]]);export{D as default};
