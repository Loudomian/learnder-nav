const c={props:{proxy:Object},created:function(){this.endpoint=this.item.endpoint||this.item.url,this.endpoint&&this.endpoint.endsWith("/")&&(this.endpoint=this.endpoint.slice(0,-1))},methods:{fetch:function(t,h,o=!0){var n,r;let e={};(n=this.proxy)!=null&&n.useCredentials&&(e.credentials="include"),(r=this.proxy)!=null&&r.headers&&this.proxy.headers&&(e.headers=this.proxy.headers),this.item.useCredentials!==void 0&&(e.credentials=this.item.useCredentials===!0?"include":"omit"),this.item.headers!==void 0&&this.item.headers&&(e.headers=this.item.headers),e=Object.assign(e,h),t.startsWith("/")&&(t=t.slice(1));let s=this.endpoint;return t&&(s=`${this.endpoint}/${t}`),fetch(s,e).then(i=>{let d=i.ok;if(Array.isArray(this.item.successCodes)&&(d=this.item.successCodes.includes(i.status)),!d)throw new Error(`Ping: target not available (${i.status} error)`);return o?i.json():i})}}};export{c as s};
