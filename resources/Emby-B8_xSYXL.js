import{s as l}from"./service-CvN87575.js";import{_ as d,G as C,r as f,o as i,c as b,w as a,a as r,t as o,b as n,F as u,d as c,n as p,e as y}from"./index-DwBrLgem.js";const v={name:"Emby",components:{Generic:C},mixins:[l],props:{item:Object},data:()=>({status:"",albumCount:0,songCount:0,movieCount:0,seriesCount:0,episodeCount:0}),computed:{embyCount:function(){return this.item.libraryType==="music"?`${this.songCount} songs, ${this.albumCount} albums`:this.item.libraryType==="movies"?`${this.movieCount} movies`:this.item.libraryType==="series"?`${this.episodeCount} eps, ${this.seriesCount} series`:"wrong library type ğŸ’€"}},created(){this.fetchServerStatus(),!this.item.subtitle&&this.status!=="dead"&&this.fetchServerMediaStats()},methods:{fetchServerStatus:async function(){this.fetch("/System/info/public").then(t=>{if(t.Id)this.status="running";else throw new Error}).catch(t=>{console.log(t),this.status="dead"})},fetchServerMediaStats:async function(){const t={"X-Emby-Token":this.item.apikey};var e=await this.fetch("/items/counts",{headers:t}).catch(s=>{console.log(s)});this.albumCount=e.AlbumCount,this.songCount=e.SongCount,this.movieCount=e.MovieCount,this.seriesCount=e.SeriesCount,this.episodeCount=e.EpisodeCount}}},_={class:"title is-4"},S={class:"subtitle is-6"};function g(t,e,s,k,w,m){const h=f("Generic");return i(),b(h,{item:s.item},{content:a(()=>[r("p",_,o(s.item.name),1),r("p",S,[s.item.subtitle?(i(),n(u,{key:0},[c(o(s.item.subtitle),1)],64)):(i(),n(u,{key:1},[c(o(m.embyCount),1)],64))])]),indicator:a(()=>[t.status?(i(),n("div",{key:0,class:p(["status",t.status])},o(t.status),3)):y("",!0)]),_:1},8,["item"])}const B=d(v,[["render",g],["__scopeId","data-v-4d34e994"]]);export{B as default};
